YUI.add("search-autosuggest-field-view",function(e){var t=150;e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n=this.appContext.getLocation();return this.set("searchUrl",new e.SearchUrl(n.href,this.appContext)),this.set("siteSection",e.URLHelper.getSiteSectionByURL(n.pathname)),this.appContext.flipper.isFlipped("enable-search-pills")&&this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"})}),this.enableMobileNav=t.enableMobileNav,this},subviewConfig:{"search-autosuggest-items-list-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.enableMobileNav||this.appContext.getUA().isMobileOrTablet}}},loadState:function(){var t;return this.enableMobileNav?e.Promise.resolve():(t=[this.getContextModelPromise()],e.Promise.all(t))},additionalViewClasses:function(){var e=[];return e},buildContainer:function(){var e=this.get("context"),t=this.get("searchUrl").getSearchTerm(),n=[];return e&&e.type&&n.push({combo:!0,name:e.name,secondName:this.get("contextToString")[e.scope]}),this.setContainerWithTemplate("search-autosuggest-field",{searchTerm:t,pills:n,hasPills:n.length>0}),(n.length>0||t.length>0)&&this.get("container").addClass("expanded"),this},activate:function(){var t=this.get("container"),n=t.one("#search-field");this.appContext.getViewer().prefs&&this.appContext.getViewer().prefs.keyboardShortcutsEnabled&&this.attachKeyEvent("up:83",this.focusSearchField.bind(this)),t.one("form")&&this.registerEventHandler(t.one("form").on("submit",this.executeSearch.bind(this))),this.appContext.flipper.isFlipped("enable-search-pills")&&this.registerEventHandler(e.on("add-context-to-search-field",this.addContext.bind(this))),this.appContext.flipper.isFlipped("enable-empty-search-text-transfer")&&this.registerEventHandler(e.on("transfer-to-gn-search",this.addSearchText.bind(this))),this.registerEventHandler(t.on("mousedown",this.handleMouseDown.bind(this))),this.registerEventHandler(n.on({valuechange:this.updateAutosuggestItems.bind(this),focus:this.handleSearchFieldFocus.bind(this),blur:this.handleSearchFieldBlur.bind(this)})),this.registerEventHandler(n.on("key",this.handleSearchFieldKeydown.bind(this),"down:27,38,40,8"));try{e.config.doc.activeElement.isEqualNode(n.getDOMNode())&&(this.blurSearchField(),this.focusSearchField())}catch(r){}return this},getContextModelPromise:function(){var t=this.get("searchUrl").getAPIParams(),n=e.Promise.resolve(),r=null,i=this;return this.appContext.flipper.isFlipped("enable-search-pills")&&(t[e.SearchHelper.API.groupId]?(r={type:"group",id:t[e.SearchHelper.API.groupId],scope:"photos"},n=this.appContext.getModel("group-info-models",r.id)):t[e.SearchHelper.API.userId]?(r={type:"user",id:t[e.SearchHelper.API.userId],scope:t[e.SearchHelper.API.faves]?"favorites":"photostream"},t[e.SearchHelper.API.faves]?r.scope="favorites":t[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]?r.scope="albums":r.scope="photostream",n=this.appContext.getModel("person-models",r.id)):t[e.SearchHelper.API.faves]?(r={type:"user",id:this.appContext.getViewer().nsid,scope:"favorites"},n=this.appContext.getModel("person-models",r.id)):t[e.SearchHelper.API.contacts]?r={type:"contacts",scope:"photos",name:this.get("contextToString").contacts}:t[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(r={type:"everyone",scope:"photos",name:this.get("contextToString").everyone})),n.then(function(e){e&&(r.name=r.type==="user"?e.getValue("displayname"):e.getValue("group").getValue("title")),i.set("context",r)})},handleMouseDown:function(e){var t=e.target;if(e.which===1)if(t.hasClass("search-pill-remover"))e.halt(),this.removeContext();else if(t.hasClass("search-icon-button"))e.halt(),this.executeSearch(e);else if(t.hasClass("search-pill")||t.hasClass("search-pillbox")||t.hasClass("search-form"))e.halt(),this.focusSearchField()},addSearchText:function(e){var t=this.get("container").one("#search-field");t.set("value",t.get("value")+e),this.focusSearchField()},addPill:function(t,n){var r,i={name:t};n&&(i.combo=!0,i.secondName=n),r=e.Node.create(this.templates("search-pill")(i)),this.get("container").one(".search-pillbox").appendChild(r)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},addContext:function(t){var n=this.get("context");if(!n||n.id!==t.id||n.name!==t.name||n.type!==t.type||n.scope!==t.scope)n&&n.type?(this.removeContext(),this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope])):(this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope]));this.fire("parentViewEvent","disable-autosuggest"),this.get("container").one("#search-field").set("placeholder",""),this.focusSearchField(),e.rapidTracker.beacon(this.name,"searchAddContext_"+t.type+"_"+t.scope)},removeContext:function(){var t=this.get("container"),n=t.one("#search-field");this.set("context",null),n.set("placeholder",this.intlMessage({intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"})),this.removePills(),this.blurSearchBar(),e.fire("remove-context-in-search-field",{}),e.rapidTracker.beacon(this.name,"searchRemoveContext");if(this.get("siteSection")&&this.get("siteSection").name==="search"&&n.get("value").length>0){this.executeSearch();return}this.updateAutosuggestItems(),t.hasClass("expanded")&&(this.fire("parentViewEvent","enable-autosuggest"),this.firstAutosuggestView||(e.rapidTracker.beacon(this.name,"autosuggestShow"),this.firstAutosuggestView=!0))},onParentViewEvent
:function(e,t){var n=t&&t.length&&t[0];switch(n){case"resize-search-field":this.resizeSearchField(t[1]);break;case"focus-search-field":this.focusSearchField();break;case"clear-search-field":this.clearSearchField()}},onSubviewEvent:function(e,t){var n=t&&t.length&&t[0],r=this.get("container"),i,s;switch(n){case"autosuggest-lost-all-focus":this.handleAutosuggestBlur();break;case"focus-search-field":this.focusSearchField();break;case"autosuggest-no-items":r.removeClass("autosuggest-active");break;case"autosuggest-has-items":r.addClass("autosuggest-active");break;case"autosuggest-update-field":s=r.one("#search-field"),s&&typeof t[1]=="string"&&s.set("value",t[1]);break;case"backspace-focus":s=r.one("#search-field"),s&&(i=s.get("value"),s.set("value",i.substring(0,i.length-1)),this.focusSearchField())}},executeSearch:function(t){var n,r,i,s={};t&&t.halt(),n=this.get("container").one("#search-field").get("value"),i=this.get("context"),i&&i.type?(i.type==="group"&&i.scope==="discussions"?(s.q=n,s.w=i.id,s.m="discuss",r=new e.SearchUrl(s,this.appContext,e.SearchUrl.searchTypes.CLASSIC_GROUPS)):(i.type==="user"?(s[e.SearchHelper.API.userId]=i.id,i.scope==="favorites"?s[e.SearchHelper.API.faves]=1:i.scope==="albums"?s[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]=1:s[e.SearchHelper.API.userId]=i.id):i.type==="group"?s[e.SearchHelper.API.groupId]=i.id:i.type==="contacts"?s[e.SearchHelper.API.contacts]="all":i.type==="everyone",s[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]=1,r=this.get("searchUrl"),Object.keys(s).forEach(function(e){r.setAPIParam(e,s[e])}),r.setSearchType(e.SearchUrl.searchTypes.PHOTOS),r.setSearchTerm(n)),e.rapidTracker.beacon(this.name,"searchWithContext_"+i.type+"_"+i.scope)):(r=this.get("searchUrl"),r.createNewSearch(n)),this.appContext.flapp.navigate(r.getURL())},focusSearchField:function(t){e.OverlayManager.DroparoundOverlay.closeAll(),this.get("container").one("#search-field").focus()},blurSearchField:function(e){this.get("container").one("#search-field").blur()},resizeSearchField:function(e){e?(this.get("container").setStyle("width",e+"px"),this.get("container").one("#search-field").setStyle("width",e+"px")):(this.get("container").removeAttribute("style"),this.get("container").one("#search-field").removeAttribute("style"))},clearSearchField:function(e){this.get("container").one("#search-field").set("value","")},updateAutosuggestItems:function(e){var t=this.get("container"),n=t.one("#search-field").get("value");e&&e.halt();if(this.get("context"))return;this.fire("parentViewEvent","update-autosuggest-items",n)},handleSearchFieldFocus:function(t){var n=this.get("container"),r=n.one(".search-form"),i,s=this;t.halt(),n.hasClass("focus")||(n.addClass("focus"),n.addClass("expanded"),this.expandTimer&&clearTimeout(this.expandTimer),this.get("context")||(i=this.registerEventHandler(r.on("transitionend",function(){s.detachRegisteredEvent(i),s.updateAutosuggestItems(),n.hasClass("expanded")&&(s.fire("parentViewEvent","enable-autosuggest"),s.firstAutosuggestView||(e.rapidTracker.beacon(s.name,"autosuggestShow"),s.firstAutosuggestView=!0))}))))},blurSearchBar:function(){clearTimeout(this.expandTimer),this.expandTimer=setTimeout(function(){var t=this.get("container"),n=this.get("context"),r=e.one(e.config.doc.activeElement);r.hasClass("autosuggest-selectable-item")||(t.removeClass("focus"),t.removeClass("autosuggest-active"),(!n||!n.type)&&t.one("#search-field").get("value").length===0&&t.removeClass("expanded"),this.fire("parentViewEvent","disable-autosuggest"))}.bind(this),t)},handleSearchFieldBlur:function(e){e.halt(),e.relatedTarget&&e.relatedTarget.hasClass("search-icon-button")?this.executeSearch():this.blurSearchBar()},handleAutosuggestBlur:function(){this.blurSearchBar()},handleSearchFieldKeydown:function(t){var n=t.keyCode,r=t.target;switch(n){case 27:t.halt(),this.blurSearchField();break;case 38:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","up");break;case 40:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","down");break;case 8:e.fluid.getTextFieldCursorPosition(r)===0&&e.fluid.getTextFieldSelection()===""&&this.removeContext()}},destructor:function(){clearTimeout(this.expandTimer),this.expandTimer=null}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-autosuggest-field","hermes-template-search-pill","search-url","autosuggest-context-results-models","storage-helper","search-autosuggest-items-list-view","url-helper"],optionalRequires:["fluid"],langBundles:["search","common","groups"]});
YUI.add("hermes-lang-groups_fr-fr",function(e,t){e.Intl.add("hermes/groups","fr-FR",{POST_THRESHOLD_EVER:["Les membres peuvent publier ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b>\u00a0\u00e9l\u00e9ment",other:"<b>${#}</b>\u00a0\u00e9l\u00e9ments"}}," dans le pool."],POST_THRESHOLD_DAY:["Les membres peuvent publier chaque jour ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b>\u00a0\u00e9l\u00e9ment",other:"<b>${#}</b>\u00a0\u00e9l\u00e9ments"}}," dans le pool."],POST_THRESHOLD_MONTH:["Les membres peuvent publier chaque mois ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b>\u00a0\u00e9l\u00e9ment",other:"<b>${#}</b>\u00a0\u00e9l\u00e9ments"}}," dans le pool."],POST_THRESHOLD_WEEK:["Les membres peuvent publier ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> \u00e9l\u00e9ment",other:"<b>${#}</b> \u00e9l\u00e9ments"}}," dans le pool chaque semaine."],ACCEPTED_CONTENT_TYPES:["Types de contenus accept\u00e9s\u00a0:"],ACCEPTED_SAFETY_LEVELS:["Niveaux de s\u00e9curit\u00e9 accept\u00e9s\u00a0:"],PHOTOS:["Photos"],VIDEOS:["Vid\u00e9os"],IMAGES:["Images"],SCREENSHOTS:["Captures d\u2019\u00e9cran"],ART:["Art"],SAFE:["S\u00fbr"],MODERATE:["Mod\u00e9r\u00e9"],RESTRICTED:["Restreint"],SEE_ALL_DISCUSSIONS:["Voir toutes les discussions"],DISCUSSION_TITLE:["Titre"],DISCUSSION_AUTHOR:["Auteur"],DISCUSSION_REPLIES:["R\u00e9ponses"],DISCUSSION_LAST_POST:["Derni\u00e8re publication"],DISCUSSION_LAST_REPLIER:["Derni\u00e8re r\u00e9ponse"],NO_DISCUSSIONS:["Soyez le premier \u00e0 commencer une discussion de groupe\u00a0!"],BE_THE_FIRST:["Soyez le premier \u00e0 ajouter une photo au groupe\u00a0!"],BE_THE_FIRST_JOIN:["Aidez ce groupe \u00e0 d\u00e9marrer\u00a0: cliquez simplement sur le bouton Rejoindre ci-dessus\u00a0!"],BE_THE_FIRST_SIGN_IN:["Aidez ce groupe \u00e0 d\u00e9marrer\u00a0: connectez-vous et partagez des photos\u00a0!"],NO_PHOTOS_BY_YOU:["Vous n\u2019avez pas encore ajout\u00e9 de photos. Qu\u2019attendez-vous\u00a0?"],WHO_IS_ME:["Qui est ce \u00ab\u00a0moi\u00a0\u00bb dont vous parlez\u00a0?"],INVALID_PERSON:["Connais pas ! D\u00e9sol\u00e9\u00a0!"],ADD_SOME_PHOTOS:["Ajouter des photos"],NO_PHOTOS:["Aucune photo dans ce groupe"],POOL_PREVIEW_HEADER:["Photos du groupe"],POOL_HEADER:["Photos du groupe"],ADD_PHOTO:["Ajouter une photo"],VIEW_X_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Afficher ${#}\u00a0photos",other:"Afficher ${#}\u00a0photos"}}],DISCUSSIONS:["Discussions"],ADD_TOPIC:["Ajouter un sujet"],SEARCH_DISCUSSIONS:["Rechercher des discussions"],SEARCH_POOL:["Pool de recherches"],ADD_A_TOPIC:["Ajouter un sujet"],TOP_CONTRIBUTORS:["Principaux contributeurs"],CONTRIBUTORS:["Contributeurs"],CONTRIBUTORS_RANK:["Rang"],CONTRIBUTORS_LATEST_PHOTO:["Derni\u00e8re photo"],CONTRIBUTORS_PHOTOS:["Photos"],CONTRIBUTORS_DISCUSSIONS:["Discussions"],CONTRIBUTORS_JOINED_GROUP:["Groupe rejoint"],SEE_ALL_MEMBERS:["Afficher tous les membres"],TOTAL_DISCUSSIONS:[{type:"plural",valueName:"count",options:{one:"${#}\u00a0discussion dans",other:"${#}\u00a0discussions dans"}}," ","${groupname}"],DISCUSSION_STICKY:["\u00c9pingl\u00e9"],RANKING:["#","${count}"],BLAST_INVITED_MEMBER:["MEMBRE"],BLAST_PENDING_MEMBER:["MEMBRE"],BLAST_GROUP_MEMBER:["MEMBRE"],BLAST_MODERATOR:["MOD\u00c9RATEUR"],BLAST_ADMIN:["ADMIN"],SHARE:["Partager"],EIGHTTEEN_PLUS_SIGNEDIN:["Ce groupe est r\u00e9serv\u00e9 aux adultes de plus de 18\u00a0ans\u00a0; voulez-vous entrer\u00a0?"],EIGHTEEN_PLUS_SIGNEDOUT:["Ce groupe est r\u00e9serv\u00e9 aux personnes majeures. Connectez-vous pour afficher le groupe."],NO:["Non"],YES:["Oui"],GROUP_POOL_LOADING_ERROR:["Erreur lors du chargement des photos du groupe"],GROUP_DISCUSSION_LOADING_ERROR:["Erreur lors du chargement de la liste de discussion du groupe"],GROUP_TOP_CONTRIBUTORS_LOADING_ERROR:["Erreur lors du chargement des principaux contributeurs du groupe"],GROUP_DELETION_ERROR:["Une erreur est survenue lors de la suppression de la photo. Veuillez r\u00e9essayer."],RETRY:["R\u00e9essayer"],ADDED_NOTIFICATION:['Bravo\u00a0! Voulez-vous <a href="',"${url}",'">ajouter quelque chose</a>\u00a0?'],NOT_ADDED_NOTIFICATION:['Cet \u00e9l\u00e9ment est d\u00e9j\u00e0 dans le pool de groupe. <a href="',"${url}",'">Voulez-vous essayer autre chose\u00a0?</a>'],PENDING_NOTIFICATION:['Votre photo/vid\u00e9o a \u00e9t\u00e9 soumise au groupe. Si elle est approuv\u00e9e par l\u2019administrateur du groupe, elle appara\u00eetra dans le pool du groupe. Voulez-vous <a href="',"${url}",'">en ajouter une autre</a>\u00a0?'],DONE_PENDING_NOTIFICATION:["Termin\u00e9. Rien d\u2019autre \u00e0 mod\u00e9rer."],GROUP_ADD_PENDING:["Approbation en attente par l\u2019administrateur"],DELETED_NOTIFICATION:["Cet \u00e9l\u00e9ment a \u00e9t\u00e9 supprim\u00e9 du groupe."],POOL_MEMBERS_ONLY:["Les photos du groupe sont r\u00e9serv\u00e9es aux membres."],DISCUSSION_MEMBERS_ONLY:["Cette discussion de groupe est r\u00e9serv\u00e9e aux membres."],DISCUSSION_MEMBERS_ONLY_INTERSTITIAL:["Cette discussion de groupe est r\u00e9serv\u00e9e aux membres. Rejoignez la conversation en cliquant sur le bouton Rejoindre le groupe ci-dessus ou cliquez sur Aper\u00e7u pour en savoir davantage sur le groupe."],REMOVE_PHOTO:["Supprimer cette photo du groupe ?"],PENDING_COUNT_NOTIFICATION:['Vous avez <a href="',"${url}",'">',{type:"plural",valueName:"pendingCount",options:{zero:"0\u00a0photo",one:"${#}\u00a0photo",other:"${#}\u00a0photos"}}," en attente</a>"],X_GROUPS:[{type:"plural",valueName:"count",options:{one:"${#}\u00a0groupe",other:"${#}\u00a0groupes"}}],HAS_NONE:["Apparemment, vous n\u2019appartenez \u00e0 aucun groupe. Vous trouverez ci-dessous une liste de groupes qui pourraient vous int\u00e9resser."],SIGNED_OUT:["Les groupes permettent de partager des contenus et des conversations, en priv\u00e9 ou en public. Croyez-nous, il y a un groupe pour chacun d\u2019entre vous. Mais si vous ne trouvez pas celui qui vous int\u00e9resse, pourquoi ne pas cr\u00e9er le v\u00f4tre\u00a0?"],LAST_REPLY_TIME_AGO
:['<a href="',"${replyurl}",'" data-track="groupDiscussionTopicLastReplyClick">Il y a ',"${time}","</a>"],MEMBERS_ONLY_POOL_JOIN:["Seuls les membres peuvent afficher cet ensemble de groupes. Cliquez sur le bouton Aper\u00e7u ci-dessus pour en savoir davantage sur le groupe ou sur le bouton Rejoindre le groupe pour... eh bien, pour le rejoindre, pardi\u00a0!"],MEMBERS_ONLY_POOL_SIGN_IN:["Seuls les membres peuvent afficher cet ensemble de groupes. Connectez-vous pour rejoindre le groupe."],PRIVATE_GROUP:["Vous avez rejoint un groupe priv\u00e9."],RETURN_HOME:["Revenir \u00e0 la page d'accueil"],DISCUSSIONS_DISABLED:["Les discussions sont d\u00e9sactiv\u00e9es pour ce groupe."],GO_TO_GROUP_HOME:["Revenir \u00e0 la page d'accueil du groupe"],GROUP_JOIN_RULES_DIALOG_TITLE:["R\u00e8gles de groupe"],GROUP_JOIN_RULES_DIALOG_MESSAGE:["Si vous acceptez ces r\u00e8gles, vous pouvez rejoindre le groupe."],GROUP_JOIN_RULES_DIALOG_ACCEPT:["J\u2019accepte"],GROUP_JOIN_RULES_DIALOG_DECLINE:["Non, merci."],GROUP_JOIN_ERROR:["Une erreur s'est produite au moment de rejoindre le groupe."],GROUP_LEAVE_ERROR:["Une erreur s'est produite au moment de quitter le groupe."],GROUPS:["Groupes"],GROUPS_LIST_LOADING_ERROR:["Une erreur s'est produite lors du chargement des groupes.<br>Cliquez sur <a class=\"retry\">Charger \u00e0 nouveau</a> pour relancer l'op\u00e9ration."],GROUPS_LIST_ERROR_HEADER:["Erreur de chargement des groupes"],CONTRIBUTORS_DISCUSSION_TOPICS:["Sujets"],GROUPS_LIST_GROUPS:["Groupes"],GROUPS_LIST_MEMBERS:["Membres"],GROUPS_LIST_PHOTOS:["Photos"],GROUPS_LIST_TOPICS:["Sujets"],GROUPS_LIST_LATEST:["Dernier"],GROUPS_LIST_LATEST_DISCUSSION:["Derni\u00e8re publication"],GROUPS_LIST_LATEST_PHOTO:["Derni\u00e8re photo"],GROUPS_LEAVE_WARNING_TITLE:["Quitter ","${title}","\u00a0?"],GROUPS_LEAVE_WARNING:["Voulez-vous vraiment quitter le groupe \u00ab\u00a0","${title}","\u00bb\u00a0?"],GROUPS_LEAVE_WARNING_LAST_MEMBER:["Voulez-vous vraiment quitter le groupe \u00ab\u00a0","${title}","\u00a0\u00bb\u00a0? Vous \u00eates la derni\u00e8re personne de ce groupe. Si vous le quittez, le groupe sera supprim\u00e9."],GROUPS_LEAVE_WARNING_ADMIN:["Voulez-vous vraiment quitter le groupe ","${title}","\u00a0? Si vous \u00eates le dernier administrateur de ce groupe, le membre le plus ancien sera promu au r\u00f4le d\u2019administrateur \u00e0 votre d\u00e9part."],GROUPS_LEAVE_WARNING_REMOVE_PHOTOS:["<div class='checkbox-prompt'><label><input type=\"checkbox\">Souhaitez-vous \u00e9galement supprimer toutes les photos et les vid\u00e9os que vous avez ajout\u00e9es au pool du groupe\u00a0?</input></label></div>"],GROUPS_LEAVE_WARNING_LEAVE_BUTTON:["Quitter ce groupe"],GROUPS_LEAVE_WARNING_CANCEL_BUTTON:["Annuler"],EMPTY_BLAST:["Aucun Admin Blast."],ADD_BLAST:["Pourquoi ne pas en ajouter\u00a0?"],REMOVING_BLAST:["Suppression du Blast..."],CREATE_BLAST:["Ajouter un Admin Blast au groupe"],BACK_TO_OVERVIEW:["Retour \u00e0 l\u2019aper\u00e7u du groupe"],GROUP_POOL:["Photos du groupe"],NO_VISIBLE_PHOTOS:["${screenname}"," ne dispose d\u2019aucune photo que vous pouvez consulter dans le pool ","${groupTitle}","."],UPDATE_BLAST_ERROR:["Impossible de mettre \u00e0 jour le Blast du groupe pour le moment"],DELETE_BLAST_ERROR:["Impossible de supprimer le Blast du groupe pour le moment"],LONG_BLAST_ERROR:[{type:"plural",valueName:"count",options:{one:"Le groupe occupe ${#}\u00a0caract\u00e8re, il doit \u00eatre compos\u00e9 de moins de 496\u00a0caract\u00e8res.",other:"Le groupe occupe ${#}\u00a0caract\u00e8res, il doit \u00eatre compos\u00e9 de moins de 496\u00a0caract\u00e8res."}}],GROUPS_LIST_BELONG_HEADER:["Groupes dont vous \u00eates membre"],GROUPS_LIST_BELONG_MORE:["Afficher tous les groupes dont vous \u00eates membre"],PENDING:[{type:"plural",valueName:"count",options:{one:"${#}\u00a0en attente",other:"${#}\u00a0en attente"}}],GROUPS_ADMIN:["Groupes que vous administrez"],GROUPS_MODERATED:["Groupes que vous mod\u00e9rez"],GROUPS_BELONG:["Groupes dont vous \u00eates membre"],GROUPS_FAVED:["Groupes que vous avez d\u00e9finis comme favoris"],VIEW_ALL_GROUPS_ADMIN:["Afficher tous les groupes que vous administrez"],VIEW_ALL_GROUPS_MODERATED:["Afficher tous les groupes que vous mod\u00e9rez"],GROUP_DESCRIPTION:["Description du groupe"],GROUP_RULES:["R\u00e8gles de groupe"],GROUP_ADDITIONAL_INFO:["Informations suppl\u00e9mentaires"],PENDING_MEMBER_COUNT_NOTIFICATION:['Vous avez <a href="',"${url}",'">',{type:"plural",valueName:"pendingCount",options:{zero:"0\u00a0membre en attente",one:"${#}\u00a0membre en attente",other:"${#}\u00a0membres en attente"}},"</a>"],BLAST_DATE_ADDED:[{type:"date",valueName:"blastDateAdded",format:"long"}],GROUP_DISCUSSION_START:["Commencer une conversation"],GROUP_DISCUSSION_DELETE_REPLY:["Supprimer la r\u00e9ponse"],GROUP_DISCUSSION_CONFIRM_DELETE:["Voulez-vous vraiment supprimer cette r\u00e9ponse\u00a0?"],GROUP_DISCUSSION_DELETE:["Effacer"],GROUP_DISCUSSION_DELETE_FAILED:["\u00c9chec de la suppression de la r\u00e9ponse, veuillez r\u00e9essayer."],GROUP_DISCUSSION_PUBLISH_FAILED:["\u00c9chec de la publication de la r\u00e9ponse, veuillez r\u00e9essayer."],GROUP_DISCUSSION_PUBLISH_REPLY:["Publier une r\u00e9ponse"],GROUP_DISCUSSION_RECENT_DISCUSSIONS:["Discussions"],GROUP_DISCUSSION_POST_REPLY:["Publier une r\u00e9ponse"],GROUP_DISCUSSION_PUBLISH:["Publier une r\u00e9ponse"],GROUP_DISCUSSION_PREVIEW:["Aper\u00e7u"],GROUP_DISCUSSION_EDIT_FAILED:["\u00c9chec de la modification de la r\u00e9ponse, veuillez r\u00e9essayer."],GROUP_DISCUSSION_EDIT_REPLY:["Modifier la r\u00e9ponse"],GROUP_DISCUSSION_PREVIEW_EDIT_FAILED:["\u00c9chec de l'affichage de l'aper\u00e7u de la modification, veuillez r\u00e9essayer."],GROUP_DISCUSSION_PREVIEW_EDIT:["Afficher un aper\u00e7u de la modification"],GROUP_DISCUSSION_PREVIEW_REPLY_FAILED:["\u00c9chec de l'affichage de l'aper\u00e7u de la r\u00e9ponse, veuillez r\u00e9essayer."],GROUP_DISCUSSION_PREVIEW_REPLY:["Afficher un aper\u00e7u de la r\u00e9ponse"],GROUP_DISCUSSION_POST_LOCKED_WITH_LINK
:["La discussion de groupe dans ","${groupname}",' a \u00e9t\u00e9 verrouill\u00e9e. (<a href="',"${unlockUrl}",'">d\u00e9verrouiller\u00a0?</a>)'],GROUP_DISCUSSION_POST_LOCKED:["Ce sujet a \u00e9t\u00e9 verrouill\u00e9."],GROUP_DISCUSSION_REPLY_EDITED:["Publi\u00e9 ","${createdAgo}",". Modifi\u00e9 ","${editedAgo}"],GROUP_DISCUSSION_REPLY_EDITED_WITH_ROLE:["Publi\u00e9 ","${createdAgo}",". Modifi\u00e9 par ","${editAuthor}"," (","${editRole}",") ","${editedAgo}"],GROUP_DISCUSSION_REPLY_EDITED_BY_STAFF:["Publi\u00e9 ","${createdAgo}",". Modifi\u00e9 par ","${editAuthor}"," (personnel) ","${editedAgo}"],GROUP_DISCUSSION_DELETE_TOPIC:["Supprimer le sujet"],GROUP_DISCUSSION_CONFIRM_DELETE_TOPIC:["Voulez-vous vraiment supprimer ce sujet\u00a0?"],GROUP_DISCUSSION_STICKY_FAILED:["\u00c9chec de l'action de marquage/suppression du marquage de ce sujet comme \u00e9pingl\u00e9.  Veuillez r\u00e9essayer"],GROUP_DISCUSSION_STICKY:["\u00c9pingl\u00e9"],GROUP_DISCUSSION_LOCK_FAILED:["\u00c9chec du verrouillage/d\u00e9verrouillage de ce sujet.  Veuillez r\u00e9essayer"],GROUP_DISCUSSION_LOCK:["Verrouiller le sujet"],DISCUSSION_REPLY_REPLY_PROMPT:["Cliquez pour r\u00e9pondre \u00e0 la r\u00e9ponse"],DISCUSSION_REPLY_PERMALINK_PROMPT:["Permalien"],DISCUSSION_REPLY_DELETE_PROMPT:["Cliquez pour supprimer cette r\u00e9ponse"],DISCUSSION_REPLY_EDIT_PROMPT:["Cliquez pour modifier cette r\u00e9ponse"],GROUP_DISCUSSION_LOCK_CONFIRMATION_TITLE:["Verrouiller le sujet"],GROUP_DISCUSSION_LOCK_CONFIRMATION:["Voulez-vous vraiment verrouiller ce sujet\u00a0?"],GROUP_DISCUSSION_LOCK_BUTTON:["Verrouiller"],GROUP_DISCUSSION_UNLOCK_CONFIRMATION_TITLE:["D\u00e9verrouiller le sujet"],GROUP_DISCUSSION_UNLOCK_CONFIRMATION:["Voulez-vous vraiment d\u00e9verrouiller ce sujet\u00a0?"],GROUP_DISCUSSION_UNLOCK_BUTTON:["D\u00e9verrouiller"],DISCUSSION_MORE_LINK:["Plus..."],DISCUSSION_SEARCH_LINK:["Rechercher les discussions de ce groupe"],DISCUSSION_FORMAT_REPLY:["Voulez-vous formater votre r\u00e9ponse\u00a0?"],GROUP_DISCUSSION_FORMATTING_TITLE:["Formatage de la discussion"],GROUP_DISCUSSION_FORMATTING_CLOSE:["Fermer"],SIGN_IN_TO_REPLY:["Connectez-vous pour r\u00e9pondre"],DISCUSSION_SIGN_IN_TO_REPLY:["Connectez-vous pour r\u00e9pondre\u00a0!"],GROUP_DISCUSSION_PUBLISH_FAILED_LOCKED:["\u00c9chec de la publication de la r\u00e9ponse. Ce sujet est \u00e0 pr\u00e9sent verrouill\u00e9."],GROUP_DISCUSSION_PUBLISH_FAILED_LOCKED_OR_NONMEMBER:["\u00c9chec de la publication de la r\u00e9ponse. Ce sujet est verrouill\u00e9 ou vous n\u2019\u00eates pas membre du groupe."],GROUP_DISCUSSION_PUBLISH_FAILED_DELETED:["\u00c9chec de la publication de la r\u00e9ponse.  Ce sujet a \u00e9t\u00e9 supprim\u00e9."],GROUP_DISCUSSION_GROUP_LOCKED:["Toutes les discussions pour ce groupe sont verrouill\u00e9es."],GROUP_DISCUSSION_GROUP_LOCKED_WITH_LINK:['Toutes les discussions sont verrouill\u00e9es pour ce groupe (<a title="unlock group discussions?" href="',"${unlockUrl}",'">d\u00e9verrouiller\u00a0?</a>)'],CREATED_YEAR:["Depuis ","${createdYear}"],UPDATED_TIME_AGO:["Mis \u00e0 jour ","${updatedAgo}"],GROUP_JOIN:["Rejoindre le groupe"],GROUP_JOIN_SHORT:["Rejoindre"],GROUP_JOINED:["Rejoint"],GROUP_JOIN_REQUESTED:["Participation demand\u00e9e"],GROUP_JOIN_REQUESTED_SHORT:["En attente"],GROUP_LEAVE_GROUP:["Quitter le groupe"],GROUP_LEAVE_GROUP_SHORT:["Quitter"],PHOTOS_LINK_LABEL:["Photos"],DISCUSSIONS_LINK_LABEL:["Discussions"],ADMIN_LINK_LABEL:["Administration"],ERROR_LOADING:["Une erreur s\u2019est produite lors du chargement de ce groupe. Veuillez r\u00e9essayer ult\u00e9rieurement."],VISIBLE_REPLIES:["(","${from}"," \u00e0 ","${to}"," sur ","${total}","\u00a0r\u00e9ponses)"],JOIN_GROUP_TO_START_DISCUSSION:["Rejoignez le groupe pour d\u00e9marrer une conversation\u00a0!"],POOL_PREVIEW:[{type:"plural",valueName:"count",options:{one:"Affichage d'${#}\u00a0ligne",other:"Affichage de ${#}\u00a0lignes"}}],GROUP_BAN_MEMBER:["Exclure un membre"],GROUP_BAN_MEMBER_FAILED:["\u00c9chec du banissement du membre.  Veuillez r\u00e9essayer."],GROUP_BAN_MEMBER_CONFIRM:["Voulez-vous vraiment bannir ce membre du groupe\u00a0?"],GROUPS_BAN_MEMBER_BUTTON:["Exclure un membre"],GROUPS_BAN_MEMBER_CANCEL_BUTTON:["Annuler"],GROUP_BAN_MEMBER_SUCCESS:["Membre exclu du groupe"],GROUP_BAN_MEMBER_FAILED_ALREADY:["\u00c9chec du banissement du membre.  Ils ont peut-\u00eatre \u00e9t\u00e9 d\u00e9j\u00e0 bannis du groupe."],GROUP_MEMBERS_SIGNIN:["Connectez-vous pour afficher les membres du groupe."],GROUP_MEMBERS_ERROR_LOADING:["Une erreur s\u2019est produite lors du chargement des membres de ce groupe. Veuillez r\u00e9essayer ult\u00e9rieurement."],GROUP_MEMBERS_LOADMORE:["Charger d'autres membres"],GROUP_LANDING_HEADLINE:["Les groupes Flickr sont un moyen g\u00e9nial pour partager des photos, publier des commentaires et participer \u00e0 des discussions."],GROUP_RECOMMENDED_GET_STARTED:["D\u00e9butez avec les groupes Flickr suivants"],GROUP_RECOMMENDED_JOIN_A_GROUP:["Rejoindre un groupe"],SIGN_IN_BEFORE_JOIN_TITLE:["Vous avez trouv\u00e9 un groupe \u00e0 rejoindre\u00a0!"],SIGN_IN_BEFORE_JOIN_MESSAGE:["Fantastique\u00a0! Il vous suffit de vous connecter pour rejoindre ","${name}","."],SIGN_UP_AND_JOIN_MESSAGE:["Rejoignez Flickr et devenez membre de ","${name}","."],SIGN_IN_AND_JOIN:["Connectez-vous et rejoignez"],SIGN_UP_BEFORE_CREATE_TITLE:["Cr\u00e9ez un nouveau groupe Flickr !"],SIGN_UP_AND_CREATE_MESSAGE:["Rejoignez Flickr pour cr\u00e9er un nouveau groupe."],GROUPS_SUBNAV_MEMBERS:[{type:"plural",valueName:"count",options:{one:"membre",other:"membres"}}],GROUPS_SUBNAV_DISCUSSIONS:[{type:"plural",valueName:"count",options:{one:"discussion",other:"discussions"}}],GROUPS_SUBNAV_PHOTOS:[{type:"plural",valueName:"count",options:{one:"photo",other:"photos"}}],GROUPS_COVER_ATTRIBUTION:["Photo de ","${username}"],GROUPS_BACK_TO_MINE:["Retour \u00e0 mes groupes"],GROUPS_BACK_TO_OTHERS:["Retour aux groupes de ","${username}"],GROUPS_FOUNDED:["Fond\u00e9 le ",{type:"date",valueName:"intlDate",format
:"long"}],NO_PUBLIC_GROUPS:["Cet utilisateur n'a rejoint aucun groupe public."],RECOMMENDED_GROUPS:["Groupes recommand\u00e9s\u00a0:"],GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS:["Aucune photo publique dans le groupe de photos"],GROUP_INVITE_ONLY_HEADER:["L\u2019adh\u00e9sion \u00e0 ","${groupName}"," est sur invitation uniquement."],GROUP_INVITE_ONLY_DESC:["Il vous suffit de contacter l\u2019administrateur en charge des invitations pour l\u2019informer que vous souhaitez vous inscrire\u00a0!"],GROUP_INVITE_ONLY_CONTACT_ADMIN:["Contacter l\u2019administrateur du groupe"],GROUP_INVITE_ONLY_SEND:["Envoyer"],GROUP_INVITE_EMPTY_MESSAGE:["Le message est vide."],GROUP_INVITE_PENDING:["Votre demande d\u2019adh\u00e9sion \u00e0 ","${groupName}"," est toujours en attente d\u2019approbation du mod\u00e9rateur, alors tenez bon\u00a0!"],GROUP_SLOW:["Nous ne parvenons pas \u00e0 afficher ce groupe actuellement. Veuillez r\u00e9essayer."],RESET_FILTER:["R\u00e9initialiser les filtres"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-autosuggest-bar",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div id="autosuggest">\n	<div class="search-icon"></div>\n	<form action="/search/" method="get" role="search">\n		<input type="text" name="q" value="'+e.escapeExpression((s=(s=n.searchTerm||(t!=null?t.searchTerm:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"searchTerm",hash:{},data:i}):s))+'" id="autosuggest-input" class="yui3-aclist-input" autocomplete="off" aria-label="Search" role="textbox">\n	</form>\n</div>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/autosuggest-bar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-autosuggest-item",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return' style="background-image: url('+e.escapeExpression((s=(s=n.icon||(t!=null?t.icon:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"icon",hash:{},data:i}):s))+');"'},3:function(e,t,n,r,i){return"<i></i>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="autosuggest-item" data-type="'+l((o=(o=n.type||(t!=null?t.type:t))!=null?o:a,typeof o===f?o.call(u,{name:"type",hash:{},data:i}):o))+'" data-section="'+l((o=(o=n.section||(t!=null?t.section:t))!=null?o:a,typeof o===f?o.call(u,{name:"section",hash:{},data:i}):o))+'" data-destination="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'">\n	<div class="autosuggest-icon"'+((s=n["if"].call(u,t!=null?t.icon:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+">\n		"+((s=n.unless.call(u,t!=null?t.icon:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n	</div>\n	<div class="autosuggest-text">\n		<div>'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+"</div><span>"+l((o=(o=n.subtitle||(t!=null?t.subtitle:t))!=null?o:a,typeof o===f?o.call(u,{name:"subtitle",hash:{},data:i}):o))+"</span>\n	</div>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/autosuggest-item",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("autosuggest-view",function(e){var t=require("lib/helpers/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create("autosuggest-view",e.FlickrView,[],{langBundles:this.details.langBundles,START_MATCH_MULTIPLIER:2,MATCH_THRESHOLD:0,MAX_RESULTS_TO_DISPLAY:9,MATCH_DISTANCE_THRESHOLD:.2,MID_TOKEN_MATCH_QUERY_LENGTH_THRESHOLD:4,COVERAGE_SCORE_QUERY_LENGTH_THRESHOLD:3,initializer:function(e){var t=this.appContext.getViewer();return e.contextWeights?this.contextWeights=e.contextWeights:(this.contextWeights={global_global:{tags:1,people:1,groups:1}},t.signedIn&&(this.contextWeights[t.nsid+"_user"]={people:1,groups:1})),this.searchId=e.searchId,e.defaultSearchScope?this.defaultSearchScope=e.defaultSearchScope:this.searchId?this.defaultSearchScope=null:this.defaultSearchScope={},this.inputNode=null,this.resultItems=[],this},loadState:function(){var t=this;return this.searchId?this.appContext.getModel("search-photos-models",this.searchId).then(function(e){t.searchModel=e}):e.Promise.resolve()},buildContainer:function(){var t,n;return this.searchModel?(n=this.searchModel.getValue("apiParams"),t=n.text||n.tags||""):t="",this.setContainerWithTemplate("autosuggest-bar",{searchTerm:e.flutil.unescape(t)}),this},activate:function(){var t=this;return this.getContextModels().then(function(){t.determineContext(),t.defaultSearchScope||(t.defaultSearchScope=t.getSearchScope(t.searchModel.getValue("apiParams"))),t.buildSearchItems()}),this.autoCompleteList=e.use("autocomplete",function(e){t.inputNode=e.one("#autosuggest-input"),t.inputNode.plug(e.Plugin.AutoComplete,{minQueryLength:0,activateFirstItem:t.hasDefaultSearchItem,source:function(){return t.resultItems.concat(t.searchItems)},resultFilters:function(e,n){var r,i,s=0,o=0,u={},a,f,l,c;r=t.buildTokenRegExps(e),i=n.filter(function(n){var i,s,o=n.raw.type===1||e.length<t.MID_TOKEN_MATCH_QUERY_LENGTH_THRESHOLD,a=e.length<t.COVERAGE_SCORE_QUERY_LENGTH_THRESHOLD;return n.raw.isSearchItem?!0:(i=n.raw.matches.reduce(function(e,n){return e+n.weight*t.maxMatch(r,n.token,o,a)},0),n.matchScore=i/n.raw.matches.length,s=e.length?i>t.MATCH_THRESHOLD:!0,s&&(u[n.raw.type]=u[n.raw.type]||0,u[n.raw.type]++),s)});for(f=0,l=t.searchItems.length;f<l;f++)c=t.searchItems[f].resultType,u[c]?t.searchItems[f].section=t.searchItems[f].startSection:t.searchItems[f].section=t.searchItems[f].endSection;return i=i.sort(function(e,n){var r=e.raw.section-n.raw.section,i;if(r===0)return e.raw.isSearchItem?-1:n.raw.isSearchItem?1:(i=n.matchScore-e.matchScore,Math.abs(i)<t.MATCH_DISTANCE_THRESHOLD?n.raw.score-e.raw.score:i);return r}),a=t.allocateTypeCounts(u,t.MAX_RESULTS_TO_DISPLAY),i=i.filter(function(e){return e.raw.isSearchItem?!0:(e.raw.type===o?s++:(o=e.raw.type,s=1),s<=a[o])}),i},resultFormatter:function(e,n){return n.map(function(e){var n;return e.raw.type===2?e.raw.members===1?n=t.intlMessage({intlName:"autosuggest.MEMBER"}):n=t.intlMessage({intlName:"autosuggest.MEMBERS",count:e.raw.members}):n=e.raw.subtitle||"",t.templates("autosuggest-item")({title:e.raw.title,subtitle:n,type:["tag","people","group","button-people","button-group"][e.raw.type],section:e.raw.section,icon:e.raw.type===0||e.raw.isSearchItem?"":t.buildIconURL(e.raw)})})},resultTextLocator:function(e){return e.isSearchItem?t.get("container").one("#autosuggest-input").get("value"):e.title}}),t.registerEventHandler(t.inputNode.on("focus",function(){e.rapidTracker.beacon(t.name,"autosuggestInputFocus"),t.fire("open"),t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})),t.registerEventHandler(t.inputNode.on("click",function(){t.fire("open"),t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})),t.inputNode.ac.after("query",function(){var e=t.get("container").one(".autosuggest-item");t.get("container").all(".autosuggest-item").each(function(t){var n;e.getAttribute("data-section")!==t.getAttribute("data-section")&&e.get("parentNode").addClass("separator"),e=t,n=t.getAttribute("data-type"),(n==="tag"||n==="button-group"||n==="button-people")&&t.get("parentNode").setAttribute("data-is-short","true")})}),t.inputNode.ac.on("select",function(e){var n=t.itemSelected(e.result);e.originEvent.stopImmediatePropagation(),n||(t.inputNode.focus(),e.halt())}),t.registerEventHandler(t.inputNode.on("keydown",function(n){var r=t.inputNode.get("value");n.keyCode===13&&(n.halt(),r&&(e.rapidTracker.beacon(t.name,"autosuggestEnterKeydown"),t.close(),t.itemSelected(r)))})),t.registerEventHandler(t.get("container").one(".search-icon").on("click",function(n){var r=t.inputNode.get("value");r&&(e.rapidTracker.beacon(t.name,"autosuggestSearchIconClick"),t.itemSelected(r))}))}),this},close:function(){this.inputNode&&this.inputNode.ac&&this.inputNode.ac.hide()},itemSelected:function(t){var n,r,i,s=this.searchModel&&e.merge(this.searchModel.getValue("apiParams"))||{};if(typeof t=="string"||!t.raw.isSearchItem&&t.raw.type===0)r="/search?",delete s.text,delete s.tags,typeof t=="string"?s.text=t:(s.text=t.raw.title,e.rapidTracker.beacon(this.name,"autosuggestSuggestedPhotoSearchSelect")),s=e.merge(this.clearParamsExceptSearchScope(s),this.defaultSearchScope);else{if(!t.raw.isSearchItem)return s={},t.raw.pathalias?n=t.raw.pathalias:n=t.raw.nsid,t.raw.type===1?(r="/photos/"+n,e.rapidTracker.beacon(this.name,"autosuggestPersonSelect")):t.raw.type===2&&(r="/groups/"+n,e.rapidTracker.beacon(this.name,"autosuggestGroupSelect")),this.classicNavigate(r),!0;i=this.get("container").one("#autosuggest-input").get("value");if(!i)return e.rapidTracker.beacon(this.name,"autosuggestSearchButtonItemSelectEmpty"),!1;if(t.raw.searchScope==="people")return e.rapidTracker.beacon(this.name,"autosuggestPeopleSearchItemSelect"),r="/search/people/?",s={q:i},this.classicNavigate(r+e.QueryString.stringify(s)),!0;if(t.raw.searchScope==="groups")return e.rapidTracker.beacon(this.name,"autosuggestGroupsSearchItemSelect"),r="/search/groups/?",s={q:i},this.classicNavigate
(r+e.QueryString.stringify(s)),!0;t.raw.isDefault?e.rapidTracker.beacon(this.name,"autosuggestDefaultPhotoSearchItemSelect"):e.rapidTracker.beacon(this.name,"autosuggestOtherPhotoSearchItemSelect"),r="/search?",s.text=i,s=this.clearParamsExceptSearchScope(s),s=e.merge(s,t.raw.searchScope)}return e.SearchHelper.clearAdvancedSearchParams(s),this.appContext.flapp.navigate(r+e.QueryString.stringify(s)),!0},determineContext:function(){var e={},t=this.appContext.getViewer();this.searchModel?(e.global_global={people:1,groups:1},t.signedIn&&(e[t.nsid+"_user"]={people:1,groups:1}),this.groupInfo?e[this.groupInfo.nsid+"_group"]={tags:1,people:1,groups:1}:this.personInfo?e[this.personInfo.nsid+"_user"]={tags:1,people:1,groups:1}:(t.signedIn&&(e[t.nsid+"_user"]={tags:1,people:1,groups:1}),e.global_global={tags:1,people:1,groups:1})):e=this.contextWeights,this.setWeights(e)},clearParamsExceptSearchScope:function(e){return delete e.user_id,delete e.group_id,delete e.contacts,delete e.faves,e},getSearchScope:function(e){var t=["user_id","group_id","contacts","faves"],n,r,i={};for(n=0,r=t.length;n<r;n++)e[t[n]]&&(i[t[n]]=e[t[n]]);return i},buildSearchItems:function(){this.searchItems=[{type:3,title:this.intlMessage({intlName:"autosuggest.SEARCH_PEOPLE"}),searchScope:"people",isSearchItem:!0,resultType:1,startSection:1,endSection:3},{type:4,title:this.intlMessage({intlName:"autosuggest.SEARCH_GROUPS"}),searchScope:"groups",isSearchItem:!0,resultType:2,startSection:2,endSection:4}],this.sectionMap={0:"0",1:"1",2:"2"}},getContextModels:function(){var n=this,r,i,s=null,o=null;return this.searchModel?(r=this.searchModel.getValue("apiParams"),r.group_id?(i={},t.nsid(r.group_id)?i.id=r.group_id:i.pathAlias=r.group_id,s=n.appContext.getModel("group-pool-models",i)):s=e.Promise.resolve(),r.user_id?(i={},t.nsid(r.user_id)?i.id=r.user_id:i.pathAlias=r.user_id,o=n.appContext.getModel("person-models",i)):o=e.Promise.resolve(),e.Promise.all([s,o]).then(function(e){e[0]&&(n.groupInfo={name:e[0].getValue("group").getValue("title"),nsid:e[0].id}),e[1]&&(n.personInfo={name:e[1].getValue("displayname"),nsid:e[1].getValue("nsid")})})):e.Promise.resolve()},classicNavigate:function(t){window.location=e.url(t)},buildIconURL:function(t){return e.URLHelper.getBuddyIconURL(t.nsid,Math.ceil(t.iconserver/1e3),t.iconserver)},buildTokenRegExps:function(t){var n=[],r,i,s,o,u=t.split(" ").map(e.Text.AccentFold.fold.bind(e.Text.AccentFold));for(r=0,i=u.length;r<i;r++)s=u[r],s&&(o=this.escapeForRegExp(s),n.push({re:new RegExp(o,"i"),numChars:s.length}));return n},escapeForRegExp:function(e){return e=decodeURIComponent(e),e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/\?/g,"\\?").replace(/\|/g,"\\|").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]")},maxMatch:function(e,t,n,r,i){var s=this,o=t.length,u;return u=e.map(function(e){var r=t.match(e.re),u=0,a;return r&&(a=r.index===0,i?u=1:u=e.numChars/o,n&&!a&&(u=0),a&&(u*=s.START_MATCH_MULTIPLIER)),u}),u.length?Math.max.apply(Math,u):0},allocateTypeCounts:function(e,t){var n=Object.keys(e),r=n.length,i={},s,o=n.reduce(function(t,n){return t+e[n]},0),u=0,a,f;t=Math.min(t,o),s=Math.floor(t/n.length);for(a=0;a<r;a++)f=n[a],s<=e[f]?i[f]=s:i[f]=e[f],u+=i[f];if(u===t)return i;a=0;while(u<t)a%=r,f=n[a],e[f]>i[f]&&(i[f]++,u++),a++;return i},setWeights:function(e){var t=this,n,r=[];this.contextWeights=e;for(n in this.contextWeights)this.appContext.getModel("autosuggest-context-results-models",n).then(function(e){r.push(e),t.computeResultItems(r),t.inputNode&&t.inputNode.ac&&t.inputNode.test(":focus")&&t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})},computeResultItems:function(t){var n=this,r={},i=[],s,o,u,a,f;for(s=0,o=t.length;s<o;s++)u=t[s],a=this.contextWeights[u.id],["tags","people","groups"].forEach(function(t){var i=u.getValue(t),s=a[t],o,f,l;if(!s)return;for(o=0,f=i.length;o<f;o++)l=i[o],r[l.key]||(r[l.key]=e.merge(l),r[l.key].score=0),r[l.key].score+=l.score*s,r[l.key].section=n.sectionMap[l.type]});for(f in r)i.push(r[f]);return this.resultItems=i,i},destructor:function(){this.inputNode&&this.inputNode.ac&&this.inputNode.ac.destroy(!0)}})},"@VERSION@",{requires:["flickr-promise","flickr-view","flutil","url","text-accentfold","url-helper","autosuggest-context-results-models","hermes-template-autosuggest-bar","hermes-template-autosuggest-item"],langBundles:["autosuggest"]});
YUI.add("hermes-template-notifications-menu",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n.unseenNotificationCount||(t!=null?t.unseenNotificationCount:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"unseenNotificationCount",hash:{},data:i}):s))},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<a class="gn-title c-notifications-menu"\n	tabindex="0"\n	aria-haspopup="true"\n	aria-expanded="false"\n	aria-label="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:i}))+'">\n	<span class="c-notification-icon" aria-hidden="true">\n		<span class="c-notification-unseencount hidden">'+((s=n["if"].call(o,t!=null?t.unseenNotificationCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</span>\n	</span>\n</a>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notifications-menu",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-notifications",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"		<li>\n			"+e.escapeExpression(e.lambda(t,t))+"\n		</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="notifications-container" style="width: '+l((o=(o=n.width||(t!=null?t.width:t))!=null?o:a,typeof o===f?o.call(u,{name:"width",hash:{},data:i}):o))+"; height: "+l((o=(o=n.height||(t!=null?t.height:t))!=null?o:a,typeof o===f?o.call(u,{name:"height",hash:{},data:i}):o))+"; overflow-x: "+l((o=(o=n.overflowX||(t!=null?t.overflowX:t))!=null?o:a,typeof o===f?o.call(u,{name:"overflowX",hash:{},data:i}):o))+"; overflow-y: "+l((o=(o=n.overflowY||(t!=null?t.overflowY:t))!=null?o:a,typeof o===f?o.call(u,{name:"overflowY",hash:{},data:i}):o))+';">\n	<header>\n		<h2>'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:i}))+'</h2>\n		<a href="/mail" class="mail-icon">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.FLICKRMAIL"},data:i}))+' <span class="flickr-mail-count"></span></a>\n	</header>\n	<ul class="notifications-list" style="max-height: '+l((o=(o=n.listHeight||(t!=null?t.listHeight:t))!=null?o:a,typeof o===f?o.call(u,{name:"listHeight",hash:{},data:i}):o))+';">\n'+((s=n.each.call(u,t!=null?t.notifications:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'	</ul>\n\n	<a href="/activity" class="view-all">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_VIEW_RECENT_ACTIVITY"},data:i}))+"</a>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notifications",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("contact-models",function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined},defaultFn:function(e){return e}},username:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},realname:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},displayname:{readOnly:!0,derivedBy:["username","realname"],getter:function(e,t){return this.getValue(t,"realname")||this.getValue(t,"username")}},iconfarm:{},iconserver:{},buddyicon:{readOnly:!0,derivedBy:["iconfarm","iconserver","nsid"],getter:function(t,n){var r=this.getValue(n,"iconfarm"),i=this.getValue(n,"iconserver"),s=this.getValue(n,"nsid");return e.URLHelper.getBuddyIconURL(s,r,i)}},nsid:{readOnly:!0,defaultFn:function(e){return e}},isMe:{readOnly:!0,defaultFn:function(e){var t=this.appContext.getViewer();return t.signedIn&&t.nsid===e}},isPro:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},profileURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/photos/"+t}},followsURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/people/"+t+"/contacts"}}}})},"@VERSION@",{requires:["flickr-model-registry","attribute-helpers","url-helper"]});
YUI.add("notification-group-discussion-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseDiscussionModel:function(t,n,r,i){var s={id:t,pathAlias:n,title:r.name,replyCount:r.replies,groupID:r.group_id,groupName:r.groupName,iconUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(r.iconurls),coverPhotoUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(r.coverphoto_url),group:i};return s},attributes:{id:{},pathAlias:{},title:{},replyCount:{},groupID:{},groupName:{},iconUrls:{},coverPhotoUrls:{},url:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(e){return"/groups/"+this.getValue(e,"groupID")+"/discuss/"+e}},groupUrl:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(e){return"/groups/"+this.getValue(e,"groupID")}},group:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-gallery-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseGalleryModel:function(t){var n={id:t.id,pathAlias:t.pathalias,title:t.title._content,iconUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(t.iconurls),owner:{id:t.owner,username:t.ownername,displayname:t.realname}};return n},attributes:{id:{},title:{},pathAlias:{},url:{readOnly:!0,derivedBy:["id","owner","pathAlias"],defaultFn:function(e){var t=this.getValue(e,"pathAlias")||this.getValue(e,"owner").id;return"/photos/"+t+"/galleries/"+e}},iconUrls:{},owner:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-fave-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-comment-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{},content:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-follower-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-added-to-gallery-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},gallery:{},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-people-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},personTagged:{isModel:!0},tagger:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-tag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-photo-comment-mention-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-photo-group-invite-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},group:{id:"",name:""},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-group-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-note-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
